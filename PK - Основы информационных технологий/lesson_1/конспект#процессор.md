## Процессор 

TODO: добавить оглавление и ссылки

### Терминология

`Команда` - в математике термин инструкция обозначает одну отдельную операцию процессора, определённую системой команд. В более широком понимании инструкцией может быть любое представление элемента исполнимой команды, байт кода.

`Данные` - поддающиеся многократной интерпретации представления информация в любом формализованом виде, пригодном для передачи, связи, или обработки.

`Компьютерная память` - часть вычислительной машины, физическое устройство или среда для хранения данных, используемая в вычислениях систем в течении определеного времени.

`Вычислительные машины` - устройство или система, способная выполнять заданую, измеряемую последовательность операций.

`Самомодифицирующийся код (СМК)` - программный прием, в котором приложение создает
или изменяет программный код во время выполнения. Такой код обычно применяют в программах написанныз под процессор с фон-неймоновской организацией памяти.

`Электронная эмиссия` - явление испускания электронов из твердых тел или жидкостей.

`Прототип` - черновая, базовая реализация будущего продукта/изделия для анализа работы системы в целом.

`Пропускная способность` - метрическая характеристика, показывающая соотношение
предельного количества проходящих единиц в единицу времени через канал, систему, узел.

`Кэш` - промежуточный буфер с быстрым доступом к нему, содержащий информацию, которая может быть запрошена с наибольшей вероятностью. Доступ к данным в кэше 
происходит быстрее чем, выборка исходных данных из более медленной памяти из
медленной памяти или удаленного источника, однако ее обьем существенно
огрничен по сравнению с хранилищем исходных данных.

`Когерентность памяти` (memory coherence) - свойство компьютерных систем, содержащих более одного процессора или ядра, имющих доступ к одной области памяти, заключающееся в том, что измененная одним ядрром/процессором ячейка памяти принимает новое значение для остальныз ядер/процессоров.

В однопроцессорных системах (более сторого в одноядерных) работу с памятью
выполняет один процессорный узел: только один узел может читать данные из памяти
или записывать данные в память. После записи нового значения в ячейку памяти, доступную по какому-либо адресу, при чтении данных из той же ячейка будет
получно записанное значение (даже при наличии кэширования).

В многопроцессорных (многоядерных) системах несколько процессорных узлов
работают одновременно и могут одновременно (параллельно) обращаться к одной 
ячейке памяти (для чтения или для записи). Узлы могут одновременно прочитать значения в своих кешах. Как только один из узлов запишет в ячейку новое значение, значения, сохраненные в локальной памяти других узлов, должны помечаться как устаревшие. Необходим механизм уведомления всех узлов о том, что значение, сохраненное в их кешах, устарело; такой механизм называется `протоколом  когерентности (memory coherence protocol)`. Если в системе используется подобный протокол, то говорят, что система имеет "когерентную память".

Точная природа и смысл механизма когерентности определяются моделью консистентности/свящанности, реализованной в протоколе. Для составления правильных "параллельных" программ программисты должны знать о том, какая именно модель/способ консистентности/связанности кеш-памяти испольщуется в их системах.

Если протокол когерентности/синхронизации реализован аппаратно, для выяснения
применяемой модели консистентности/связанности программисты могут использовать сниффинг (снуппинг) шины, могут читать специальные таблицы-справочники (directory-based). В качестве примера протокола когерентности можно привести протокол MSI (modified, shared, invalid) и его разновидности.

`Когерентность кэша` - свойство кэшей, означающее целостность данных, хранящихся
в локальных кэшах для разделяемого ресурса. Когерентность кэшей - частный случай
когерентности памяти.

`Герцы` - это количество тактов в секунду. Один герц, равен 1 такту в секунду.
Один гигагерц, или 1 ГГц, это 1 миллиард тактов в секунду.


### Как делают микропроцессоры - https://pikabu.ru/story/kak_delayut_mikroprotsessoryi_6779185


--------------------------------------------------------------------------------

Современный процессор (правильнее будет Микро-процессор), представляет кремниевую подложку, на которой расположены миллиарды транзисторов и линии передачи сигналов между ними.

Процессор выполняет инструкции, выполняет расчеты и координирует операции ввода/вывода.  Каждая материнская плата имее электронные чипы, которые работают с процессором и разработаны под конкретную спецификацию процессора. 
Основными производителями процессоров сегодня являются Interl, AMD (Advabced Micro Devices, Inc.), Motorola, VIA, Samsung, NVIDIA, Apple Inc. и Qualcomm.

### Спецификации процессора

Почти все современные процессоры в своей работе используют циклический процесс последовательной обработки данных, изобретённый математиком `Джоном фон Нейманом` поэтому основные блоки и принципы работы, описанные далее, подходят к любому современному процессору: в компьютере, в телефоне, в блоке управления машиной.

`Архитектура фон Неймана` - В общем случае, когда говорят об архитектуре фон Неймана, то подразумевают принцип хранения данных и инструкций в одной памяти.

 ___________________________________
|                                   |
|               ПАМЯТЬ              |
|___________________________________|
     |   ^              ^      |
     v   |              |      v
 _____________       _______________
|             |     |               |
|             |     |               |
|             |     |  АРИФМЕТИКО - |
|  УСТРОЙСТВО | --> |  ЛОГИЧЕСКОЕ   |
|  УПРАВЛЕНИЯ | <-- |  УСТРОЙСТВО   |
|             |     |  ___________  |
|             |     | |АККУМУЛЯТОР| |
|_____________|     |_______________|
                        / |    | \
                        /        \
                       /          \
                   ___/___       __\_____
                  | ВВОД |       | ВЫВОД |

Революционные нововедения:
- Создание своего компьютера IAS-машина, машина Фон Неймана, одна из первых электронно вычислительных машин.

- (1946) Обоснование использования двоичной системы для представления чисел, а введь ранее все вычислительнве машины хранили обрабатываемые числа в десятичном виде. Продемонстрировав преимущества двичной системы для технической реализации, удобство и простоту выполненния вней арифметичкских и логических операций. В дальнейшем ЭВМ стали обрабатывать и нечисловые виды инфморации - текстовую, графическую, звуковую и другие, но двоичное кодирование данных по-прежему составляет информационную основу любого современного компьютера.

- Еще одной революционной идеей, значение которой трудно переоценить, является принцип "хранимой программы". Первоначально программа задавалась путём уставноки перемычек на специальной коммутационной панели. Это было весьма трудоёмким занятием: например, для изменения программы мащины ЭНИАК требовалось несколько дней. В то премя как собственно расчёт не мог прожолжаться более нескольких минут - выходили из строя лампы, которых было огромное количество. Однако программа может также храниться в виде набора нулей и единиц, причем в той же самой памяти, что и обрабатываемые ею числа. Отсутсвие принципиальной разницы между программой и данными дало возможность ЭВИ самой формировать для себя программу в соответствии с результатами вычислений. Наличие заданного набора исполняемых команд и программ было характерной чертой первых компьютерных систем, Сегодня подобный дизайн применяют с целью упрозения конструкции вычислительного устройства. Так, настольные калькуляторы, в принципе, являются устройствами с фиксированным набором выполняемых программ. Их можно использовать для математических расчётов, но почти невозможно применить для обработки текста и компьютерных игр, для просмотра графических изображений или видео. 
Впрочем, перерограммирование ранних компьютерных систем все-таки выполнялось, однако требовало огромного обьема ручной работы по подготовке новой документации, перекоммутации и престройки блоков и устройств. Всё изменила идея хранения компьютерных программ в общей памяти. К времени её появления использование архитектур, основанных на наборах исполняемых инструкций, и предстваление вычислительного процесса как процесса выполнения инструкций, записанных в программе, чрезвычайно увеличило гибкость вычислительных систем в плане обработки данных. Один и тот же подход к рассмотрению данных и инструкций сделал простой задачу изменния самих программ.

Принципы фон Неймана - https://ru.wikipedia.org/wiki/%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D1%84%D0%BE%D0%BD_%D0%9D%D0%B5%D0%B9%D0%BC%D0%B0%D0%BD%D0%B0

----------------------------------
|   Принцип однородности памяти  |
----------------------------------
Команды и данные хранятся в одной и той же памяти и внешне в памяти неразличимы.
Распознать их можно только по способу использования; то есть ``одно и то же значение в ячейке памяти может использоваться и как данные и как команда, и как адрес в зависимости лишь от способа обращения к нему``. Это позволяет производить над командами те же операции, что и над числами, и, соответсвенно, открывает ряд возможностей. Так, циклически изменяя адресную часть команды, можно обеспечить обращение к последовательным эоементам массива данных. Такой прием носит название модификации команд и с позиций современного программирования не приветствуется.
Более полезным является другое следствие принципа однородности, когда команды одной программы могут быть получены как результат исполнения другой программы.
Эта возможность лежит в основе трансляции - перевода текста программы с языка высокого уровня на язык конкретной вычислительной машины.

------------------------
|  Принцип адресности   |
------------------------
Структурно основная память состоит из пронумерованных ячеек,
причём процессору в произвольный момент доступна любая ячейка.
Двоичные коды команд и данных разделяются на единицы информации, называемые словами, и хранятся в ячейках памяти, а для доступа к ним используются номера соответсвующих ячеек - адреса.

----------------------------------
| Принцип программного управления |
----------------------------------

Все вычисления, предусмотренные алгоритмом решения задачи,
должны быть представлены в виде программы, состоящей из последовательноси управляющих слов - команд. Каждая команда предписывает некоторую операцию
из набора операций, реализуемых вычислительной машиной. Команды программы хранятся в последовательных ячейках памяти вычислительной машины и выполняются в естественной последовательности, то есть в порядке их положения в программе.
При необходимости, с помощью специальных команд, эта последовательность может быть изменена. Решение об изменении порядка выполнения команд программы принимается либо на основании анализа результатов предшествующих
вычислений, либо безусловно.

#### Узкое место архитектуры фон Неймана
Совместное использование шины для памяти программ и памяти программ
и памяти данных приводит к узкому месту архитектуры фон Неймана, а именно ограничению пропускной способности между процессором и памятью по сравнению с обьемом памяти. Из-за того, что память программ и память данных не могут быть доступны в одно и то же время, пропускная способность канала "процессор-память" и скорость работы памяти существенно ограничивают скорость работы процессора - гораздо сильнее, чем если бы программы и данные
хранились в разных местах.

Данная проблема решается совершенствованием систем кэширования, 
что в свою очередь усложняет архитектуру систем и увеличивает риск возникновения побочных ошибок (например, проблема когерентности памяти).

---------------------------------------------------------------------------

### Скорость и разрядность

Процессоры могут работать на различных скоростях,
измеряемых в гигагерцах (ГГц). Герцы - это количество тактов в секунду. Один герц, равен 1 такту в секунду. Один гигагерц, или 1 ГГц, это 1 миллиард тактов в секунду. Процессор Intel 8088,
работал на частоте 4,77 МГц. Современные процессоры могут работать
на скоростях от 1ГГц до 5ГГц. (В зависимости от модели процессора)
Размер регистра процессора (или разрядность) - это количество бит, которое процессор может записать в один свой регистр. У процессоров
Intel 8088 размер регистра составлял 16 бит или 2 байта.
Современные процессоры имеют регистры размером 64 бит.

### Шины
##### https://multiurok.ru/files/prezentatsiia-na-temu-shiny-rs.html

`Шины данных` (NuBus, PCI Express, двунаправленный универсальный коммутатор)
     Процессоры оперируют двоичными значениями 1 и 0, которые должны
передаваться от одного утройства к другому внутри процессора, 
а такде за его пределами. Для перемещения единиц и нулей используются электронные линии внутри процессора известны как внутреняя шина данных или системная шина. В Intel 8086 внутрення шина данных содержит 16 отдельных линиц, каждая из которых за такт могла передавать одну 1 или один ноль.

     Разрядность процессора и количество линий для внутренней шины
ланных равны. Например, 8086 имеет 16-битную разрядность и 16
разрядную шину для переноса 16 бит по внутренней шине данных. В современных процессора используются 64, а в некоторых моделяз процессоров 128 битные внутренние шины данных.

`Адресная шина`
     Адресная шина - это набор проводов, которые несут адресную информацию и используется для адресации области памяти,
     в которую данные отправляются или из которой данные извлекаются.

     Как и в случае шины данных, каждый провод в адресной шине несет один бит информации. Чем больше разрядность шины, тем больший обьем оперативной памяти может адресовать процессор.
     В современных процессорах разрядность шины адреса может достигать 40 бит,соответсвенно обьем адресуемой памяти может достигать (2^40) 1 099 511 627 776 байт (1ТВ).

     Для связи процессора с внешними устройствами, например, такими как принтер, биты данных передаются по внешней шине данных. Она
     также соединяет процессор с адаптерами, клавиатурой, мышью, жестким диском и другми устройствами.

     Компьютерная шина, используемая центральным процессором или устройствами, способными инициировать сеансы DMA, для укащания физического адреса слова ОЗУ (или начала блока слов), к которому устройство может обратиться для проведения операции чтения или записи.

Интересные статьи:

Запоминающая электронно-лучевая трубка (память) -https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BF%D0%BE%D0%BC%D0%B8%D0%BD%D0%B0%D1%8E%D1%89%D0%B0%D1%8F_%D1%8D%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D0%BD%D0%BD%D0%BE-%D0%BB%D1%83%D1%87%D0%B5%D0%B2%D0%B0%D1%8F_%D1%82%D1%80%D1%83%D0%B1%D0%BA%D0%B0


Когерентность кэша - https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%B3%D0%B5%D1%80%D0%B5%D0%BD%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D0%BA%D1%8D%D1%88%D0%B0

Состояние гонки - https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%B3%D0%BE%D0%BD%D0%BA%D0%B8

Гарвардская архитектура - https://ru.wikipedia.org/wiki/%D0%93%D0%B0%D1%80%D0%B2%D0%B0%D1%80%D0%B4%D1%81%D0%BA%D0%B0%D1%8F_%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0

Архитектура фон Неймана - https://ru.wikipedia.org/wiki/%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D1%84%D0%BE%D0%BD_%D0%9D%D0%B5%D0%B9%D0%BC%D0%B0%D0%BD%D0%B0

Память на линияз задержки - https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D0%BC%D1%8F%D1%82%D1%8C_%D0%BD%D0%B0_%D0%BB%D0%B8%D0%BD%D0%B8%D1%8F%D1%85_%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B8

Ктодные лучи - https://ru.wikipedia.org/wiki/%D0%9A%D0%B0%D1%82%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5_%D0%BB%D1%83%D1%87%D0%B8